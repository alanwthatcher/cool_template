# - This file is generated by a Chef template resource. The content below is defined via node attributes
# - The node attributes are defined by code some place, and are passed into here via the property 'variables' in the resource
# - Looping through the top level keys, if the value of the key is a hash, then the contents of that hash will be nested
#   under the heading, which is the current key. Otherwise the key and value will be presented as 'key = value'

# - The logic gets a little funky to read because of the squids, but it's just ruby logic
# - Also, the logic statements are nested as expected. The output is not nested because it would add spaces in the final output

<% @key_values.each do |k,v| %>
  <% if v.is_a?(Hash) %>

<%=k%>:
    <% v.each do |nk,nv| %>
  <%=nk%>  <%=nv%>
    <% end %>

  <% else %>
<%=k%> = <%=v%>
  <% end %>
<% end %>
